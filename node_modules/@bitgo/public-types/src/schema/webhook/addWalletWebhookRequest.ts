import * as t from "io-ts";
import { NonEmptyString, NumberFromString } from "io-ts-types";
import { Optional } from "../../utils/optional";
import { TransactionRequestState } from "../transactionRequest/transactionRequestState";
import { TransactionState } from "../transactionRequest/transactionState";
import { WalletWebhookType } from "./webhookType";

export const AddWalletWebhookRequestBody = {
  type: WalletWebhookType,
  url: NonEmptyString,
  label: Optional(t.string),
  numConfirmations: t.union([t.number, NumberFromString, t.undefined]),
  allToken: Optional(t.boolean),
  listenToFailureStates: Optional(t.boolean),
  txRequestStates: Optional(t.array(TransactionRequestState)),
  txRequestTransactionStates: Optional(t.array(TransactionState)),
};
export const AddWalletWebhookRequestBodyC = t.type({
  ...AddWalletWebhookRequestBody,
});

export type AddWalletWebhookRequestBody = t.TypeOf<
  typeof AddWalletWebhookRequestBodyC
>;
