import * as t from "io-ts";
import { NumberFromString, withMessage } from "io-ts-types";

const validPartyIndexes = t.union([t.literal(0), t.literal(1), t.literal(2)]);

export const MPCv2PartyFromStringOrNumber = withMessage(
  t.union([validPartyIndexes, NumberFromString.pipe(validPartyIndexes)]),
  (input) => `value is ${input} but expected one of [0, 1, 2, "0", "1", "2"]`,
);

export type MPCv2PartyFromStringOrNumber = t.TypeOf<
  typeof MPCv2PartyFromStringOrNumber
>;
