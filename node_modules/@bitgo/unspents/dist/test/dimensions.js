"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
/* eslint-disable @typescript-eslint/ban-ts-comment */
const should = __importStar(require("should"));
const utxo_lib_1 = require("@bitgo/utxo-lib");
const { chainCodes, chainCodesP2sh, chainCodesP2shP2wsh, chainCodesP2tr, chainCodesP2trMusig2, chainCodesP2wsh } = utxo_lib_1.bitgo;
const src_1 = require("../src");
const testutils_1 = require("./testutils");
describe('Dimensions Attributes', function () {
    it('has read-only nInputs and nOutputs', function () {
        should.throws(() => (src_1.Dimensions.ZERO.nInputs = 1), /read-only/);
        should.throws(() => (src_1.Dimensions.ZERO.nOutputs = 1), /read-only/);
    });
});
describe('Output Dimensions', function () {
    it('instantiates', function () {
        const dims = new src_1.OutputDimensions({ size: 0, count: 0 });
        should.throws(() => (dims.count += 1));
    });
});
describe('Dimensions Arithmetic', function () {
    it('sums correctly', function () {
        src_1.Dimensions.zero()
            .plus({ nP2shInputs: 1 })
            .should.eql(new src_1.Dimensions({
            nP2shInputs: 1,
            nP2shP2wshInputs: 0,
            nP2wshInputs: 0,
            nP2trKeypathInputs: 0,
            nP2trScriptPathLevel1Inputs: 0,
            nP2trScriptPathLevel2Inputs: 0,
            nP2shP2pkInputs: 0,
            outputs: { size: 0, count: 0 },
        }));
        const components = [
            { nP2shInputs: 1 },
            { nP2shP2wshInputs: 2 },
            { nP2wshInputs: 3 },
            { nP2trKeypathInputs: 4 },
            { nP2trScriptPathLevel1Inputs: 5 },
            { nP2trScriptPathLevel2Inputs: 6 },
            { outputs: { size: 23, count: 1 } },
            { outputs: { size: 44, count: 2 } },
            { outputs: { size: 0, count: 0 } },
        ];
        components.forEach((component) => should.doesNotThrow(() => src_1.Dimensions.sum(component)));
        const sum = components.reduce((a, b) => a.plus(b), src_1.Dimensions.zero());
        sum.should.eql(src_1.Dimensions.sum(...components));
        sum.should.eql(new src_1.Dimensions({
            nP2shInputs: 1,
            nP2shP2wshInputs: 2,
            nP2wshInputs: 3,
            nP2trKeypathInputs: 4,
            nP2trScriptPathLevel1Inputs: 5,
            nP2trScriptPathLevel2Inputs: 6,
            nP2shP2pkInputs: 0,
            outputs: { size: 67, count: 3 },
        }));
        sum.nOutputs.should.eql(sum.outputs.count);
    });
    it('provides some typical output sizes', function () {
        [
            [src_1.Dimensions.SingleOutput.p2sh, src_1.VirtualSizes.txP2shOutputSize],
            [src_1.Dimensions.SingleOutput.p2shP2wsh, src_1.VirtualSizes.txP2shP2wshOutputSize],
            [src_1.Dimensions.SingleOutput.p2wsh, src_1.VirtualSizes.txP2wshOutputSize],
            [src_1.Dimensions.SingleOutput.p2pkh, src_1.VirtualSizes.txP2pkhOutputSize],
            [src_1.Dimensions.SingleOutput.p2wpkh, src_1.VirtualSizes.txP2wpkhOutputSize],
            [src_1.Dimensions.SingleOutput.p2tr, src_1.VirtualSizes.txP2trOutputSize],
        ].forEach(([dims, size]) => {
            dims.getOutputsVSize().should.eql(size);
        });
    });
    it('prevents sum of invalid data', function () {
        should.doesNotThrow(() => src_1.Dimensions.sum({ outputs: { count: 0, size: 0 } }));
        should.doesNotThrow(() => src_1.Dimensions.sum({ outputs: { count: 1, size: 1 } }));
        should.throws(() => src_1.Dimensions.sum({ nOutputs: 1 }));
        should.throws(() => src_1.Dimensions.sum({ nOutputs: 1, outputs: { count: 2, size: 1 } }));
        // @ts-ignore
        should.throws(() => src_1.Dimensions.sum({ nP2shInputs: 1 }, { nP2shInputs: 'foo' }));
        should.throws(() => src_1.Dimensions.sum({ outputs: { count: 1, size: 0 } }));
        should.throws(() => src_1.Dimensions.sum({ outputs: { count: 0, size: 1 } }));
        should.throws(() => src_1.Dimensions.sum({ outputs: { count: 1, size: 1 } }, { outputs: { count: 1, size: 0 } }));
    });
    it('counts inputs correctly', function () {
        Object.entries(src_1.Dimensions.SingleInput).forEach(([key, value]) => {
            value.nInputs.should.eql(1, key);
        });
    });
    it('multiplies correctly', function () {
        const d = new src_1.Dimensions({
            nP2shInputs: 1,
            nP2shP2wshInputs: 2,
            nP2wshInputs: 3,
            nP2trKeypathInputs: 4,
            nP2trScriptPathLevel1Inputs: 5,
            nP2trScriptPathLevel2Inputs: 6,
            nP2shP2pkInputs: 7,
            outputs: { count: 1, size: 22 },
        }).times(3);
        d.should.eql(new src_1.Dimensions({
            nP2shInputs: 3,
            nP2shP2wshInputs: 6,
            nP2wshInputs: 9,
            nP2trKeypathInputs: 12,
            nP2trScriptPathLevel1Inputs: 15,
            nP2trScriptPathLevel2Inputs: 18,
            nP2shP2pkInputs: 21,
            outputs: { count: 3, size: 66 },
        }));
        d.getNInputs().should.eql(84);
        d.nInputs.should.eql(84);
    });
});
describe('Dimensions from unspent types', function () {
    it('determines unspent size according to chain', function () {
        chainCodesP2sh.forEach((chain) => src_1.Dimensions.fromUnspent({ chain }).should.eql(src_1.Dimensions.sum({ nP2shInputs: 1 })));
        chainCodesP2shP2wsh.forEach((chain) => src_1.Dimensions.fromUnspent({ chain }).should.eql(src_1.Dimensions.sum({ nP2shP2wshInputs: 1 })));
        chainCodesP2wsh.forEach((chain) => src_1.Dimensions.fromUnspent({ chain }).should.eql(src_1.Dimensions.sum({ nP2wshInputs: 1 })));
        chainCodesP2tr.forEach((chain) => {
            src_1.Dimensions.fromUnspent({ chain }).should.eql(src_1.Dimensions.sum({ nP2trScriptPathLevel2Inputs: 1 }));
            src_1.Dimensions.fromUnspent({ chain }, { p2tr: { scriptPathLevel: 1 }, p2trMusig2: { scriptPathLevel: undefined } }).should.eql(src_1.Dimensions.sum({ nP2trScriptPathLevel1Inputs: 1 }));
        });
        chainCodesP2trMusig2.forEach((chain) => {
            src_1.Dimensions.fromUnspent({ chain }).should.eql(src_1.Dimensions.sum({ nP2trScriptPathLevel1Inputs: 1 }));
            src_1.Dimensions.fromUnspent({ chain }, { p2tr: { scriptPathLevel: undefined }, p2trMusig2: { scriptPathLevel: undefined } }).should.eql(src_1.Dimensions.sum({ nP2trKeypathInputs: 1 }));
        });
        src_1.Dimensions.fromUnspents(chainCodes.map((chain) => ({ chain }))).should.eql(new src_1.Dimensions({
            nP2shP2wshInputs: 2,
            nP2shInputs: 2,
            nP2wshInputs: 2,
            nP2trKeypathInputs: 0,
            nP2trScriptPathLevel1Inputs: 2,
            nP2trScriptPathLevel2Inputs: 2,
            nP2shP2pkInputs: 0,
            outputs: { count: 0, size: 0 },
        }));
        src_1.Dimensions.fromUnspents(chainCodes.map((chain) => ({ chain })), { p2tr: { scriptPathLevel: 1 }, p2trMusig2: { scriptPathLevel: undefined } }).should.eql(new src_1.Dimensions({
            nP2shP2wshInputs: 2,
            nP2shInputs: 2,
            nP2wshInputs: 2,
            nP2trKeypathInputs: 2,
            nP2trScriptPathLevel1Inputs: 2,
            nP2trScriptPathLevel2Inputs: 0,
            nP2shP2pkInputs: 0,
            outputs: { count: 0, size: 0 },
        }));
    });
    it('calculates output dimensions dynamically', function () {
        const expectedSizes = new Map([
            [testutils_1.UnspentTypeScript2of3.p2sh, src_1.VirtualSizes.txP2shOutputSize],
            [testutils_1.UnspentTypeScript2of3.p2shP2wsh, src_1.VirtualSizes.txP2shP2wshOutputSize],
            [testutils_1.UnspentTypeScript2of3.p2wsh, src_1.VirtualSizes.txP2wshOutputSize],
            [testutils_1.UnspentTypeScript2of3.p2tr, src_1.VirtualSizes.txP2trOutputSize],
            [testutils_1.UnspentTypeScript2of3.p2trMusig2, src_1.VirtualSizes.txP2trOutputSize],
            [testutils_1.UnspentTypeScript2of3.taprootKeyPathSpend, src_1.VirtualSizes.txP2trOutputSize],
            [testutils_1.UnspentTypePubKeyHash.p2pkh, src_1.VirtualSizes.txP2pkhOutputSize],
            [testutils_1.UnspentTypePubKeyHash.p2wpkh, src_1.VirtualSizes.txP2wpkhOutputSize],
        ]);
        [...Object.keys(testutils_1.UnspentTypeScript2of3), ...Object.keys(testutils_1.UnspentTypePubKeyHash)].forEach((type) => (0, testutils_1.getOutputDimensionsForUnspentType)(type).outputs.size.should.eql(expectedSizes.get(type)));
    });
});
describe('Dimensions estimates', function () {
    it('calculates vsizes', function () {
        function dim(nP2shInputs, nP2shP2wshInputs, nP2wshInputs, nOutputs) {
            return src_1.Dimensions.sum({
                nP2shInputs,
                nP2shP2wshInputs,
                nP2wshInputs,
            }, (0, testutils_1.getOutputDimensionsForUnspentType)(testutils_1.UnspentTypePubKeyHash.p2pkh).times(nOutputs));
        }
        function dimP2tr(nP2trKeypathInputs, nP2trScriptPathLevel1Inputs, nP2trScriptPathLevel2Inputs, nOutputs) {
            return src_1.Dimensions.sum({
                nP2trKeypathInputs,
                nP2trScriptPathLevel1Inputs,
                nP2trScriptPathLevel2Inputs,
            }, (0, testutils_1.getOutputDimensionsForUnspentType)(testutils_1.UnspentTypePubKeyHash.p2pkh).times(nOutputs));
        }
        const vectors = [
            [dim(1, 0, 0, 1), [false, 10, 298, 34, 342]],
            [dim(0, 1, 0, 1), [true, 11, 140, 34, 185]],
            [dim(0, 0, 1, 1), [true, 11, 105, 34, 150]],
            [dim(2, 0, 0, 1), [false, 10, 596, 34, 640]],
            [dim(0, 2, 0, 1), [true, 11, 280, 34, 325]],
            [dim(0, 0, 2, 1), [true, 11, 210, 34, 255]],
            [dim(1, 1, 1, 1), [true, 11, 543, 34, 588]],
            [dim(1, 1, 1, 2), [true, 11, 543, 68, 622]],
            [dimP2tr(1, 0, 0, 1), [true, 11, 58, 34, 103]],
            [dimP2tr(0, 1, 0, 1), [true, 11, 108, 34, 153]],
            [dimP2tr(0, 0, 1, 1), [true, 11, 116, 34, 161]],
        ];
        vectors.forEach(([dimensions, props]) => {
            [
                dimensions.isSegwit(),
                dimensions.getOverheadVSize(),
                dimensions.getInputsVSize(),
                dimensions.getOutputsVSize(),
                dimensions.getVSize(),
            ].should.eql(props);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGltZW5zaW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvZGltZW5zaW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0RBQXNEO0FBQ3RELCtDQUFpQztBQUNqQyw4Q0FBd0M7QUFDeEMsTUFBTSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsbUJBQW1CLEVBQUUsY0FBYyxFQUFFLG9CQUFvQixFQUFFLGVBQWUsRUFBRSxHQUM5RyxnQkFBSyxDQUFDO0FBQ1IsZ0NBQW9FO0FBRXBFLDJDQUE4RztBQUU5RyxRQUFRLENBQUMsdUJBQXVCLEVBQUU7SUFDaEMsRUFBRSxDQUFDLG9DQUFvQyxFQUFFO1FBQ3ZDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBRSxnQkFBVSxDQUFDLElBQVksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDekUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFFLGdCQUFVLENBQUMsSUFBWSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM1RSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLG1CQUFtQixFQUFFO0lBQzVCLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDakIsTUFBTSxJQUFJLEdBQUcsSUFBSSxzQkFBZ0IsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDekQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsUUFBUSxDQUFDLHVC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QUE4QjtZQUN6QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM1QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM1QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMzQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUUzQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM5QyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMvQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNoRCxDQUFDO1FBRUYsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUU7WUFDdEM7Z0JBQ0UsVUFBVSxDQUFDLFFBQVEsRUFBRTtnQkFDckIsVUFBVSxDQUFDLGdCQUFnQixFQUFFO2dCQUM3QixVQUFVLENBQUMsY0FBYyxFQUFFO2dCQUMzQixVQUFVLENBQUMsZUFBZSxFQUFFO2dCQUM1QixVQUFVLENBQUMsUUFBUSxFQUFFO2FBQ3RCLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQgKi9cbmltcG9ydCAqIGFzIHNob3VsZCBmcm9tICdzaG91bGQnO1xuaW1wb3J0IHsgYml0Z28gfSBmcm9tICdAYml0Z28vdXR4by1saWInO1xuY29uc3QgeyBjaGFpbkNvZGVzLCBjaGFpbkNvZGVzUDJzaCwgY2hhaW5Db2Rlc1Ayc2hQMndzaCwgY2hhaW5Db2Rlc1AydHIsIGNoYWluQ29kZXNQMnRyTXVzaWcyLCBjaGFpbkNvZGVzUDJ3c2ggfSA9XG4gIGJpdGdvO1xuaW1wb3J0IHsgRGltZW5zaW9ucywgT3V0cHV0RGltZW5zaW9ucywgVmlydHVhbFNpemVzIH0gZnJvbSAnLi4vc3JjJztcblxuaW1wb3J0IHsgZ2V0T3V0cHV0RGltZW5zaW9uc0ZvclVuc3BlbnRUeXBlLCBVbnNwZW50VHlwZVB1YktleUhhc2gsIFVuc3BlbnRUeXBlU2NyaXB0Mm9mMyB9IGZyb20gJy4vdGVzdHV0aWxzJztcblxuZGVzY3JpYmUoJ0RpbWVuc2lvbnMgQXR0cmlidXRlcycsIGZ1bmN0aW9uICgpIHtcbiAgaXQoJ2hhcyByZWFkLW9ubHkgbklucHV0cyBhbmQgbk91dHB1dHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgc2hvdWxkLnRocm93cygoKSA9PiAoKERpbWVuc2lvbnMuWkVSTyBhcyBhbnkpLm5JbnB1dHMgPSAxKSwgL3JlYWQtb25seS8pO1xuICAgIHNob3VsZC50aHJvd3MoKCkgPT4gKChEaW1lbnNpb25zLlpFUk8gYXMgYW55KS5uT3V0cHV0cyA9IDEpLCAvcmVhZC1vbmx5Lyk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdPdXRwdXQgRGltZW5zaW9ucycsIGZ1bmN0aW9uICgpIHtcbiAgaXQoJ2luc3RhbnRpYXRlcycsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkaW1zID0gbmV3IE91dHB1dERpbWVuc2lvbnMoeyBzaXplOiAwLCBjb3VudDogMCB9KTtcbiAgICBzaG91bGQudGhyb3dzKCgpID0+IChkaW1zLmNvdW50ICs9IDEpKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0RpbWVuc2lvbnMgQXJpdGhtZXRpYycsIGZ1bmN0aW9uICgpIHtcbiAgaXQoJ3N1bXMgY29ycmVjdGx5JywgZnVuY3Rpb24gKCkge1xuICAgIERpbWVuc2lvbnMuemVybygpXG4gICAgICAucGx1cyh7IG5QMnNoSW5wdXRzOiAxIH0pXG4gICAgICAuc2hvdWxkLmVxbChcbiAgICAgICAgbmV3IERpbWVuc2lvbnMoe1xuICAgICAgICAgIG5QMnNoSW5wdXRzOiAxLFxuICAgICAgICAgIG5QMnNoUDJ3c2hJbnB1dHM6IDAsXG4gICAgICAgICAgblAyd3NoSW5wdXRzOiAwLFxuICAgICAgICAgIG5QMnRyS2V5cGF0aElucHV0czogMCxcbiAgICAgICAgICBuUDJ0clNjcmlwdFBhdGhMZXZlbDFJbnB1dHM6IDAsXG4gICAgICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiAwLFxuICAgICAgICAgIG5QMnNoUDJwa0lucHV0czogMCxcbiAgICAgICAgICBvdXRwdXRzOiB7IHNpemU6IDAsIGNvdW50OiAwIH0sXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgY29uc3QgY29tcG9uZW50cyA9IFtcbiAgICAgIHsgblAyc2hJbnB1dHM6IDEgfSxcbiAgICAgIHsgblAyc2hQMndzaElucHV0czogMiB9LFxuICAgICAgeyBuUDJ3c2hJbnB1dHM6IDMgfSxcbiAgICAgIHsgblAydHJLZXlwYXRoSW5wdXRzOiA0IH0sXG4gICAgICB7IG5QMnRyU2NyaXB0UGF0aExldmVsMUlucHV0czogNSB9LFxuICAgICAgeyBuUDJ0clNjcmlwdFBhdGhMZXZlbDJJbnB1dHM6IDYgfSxcbiAgICAgIHsgb3V0cHV0czogeyBzaXplOiAyMywgY291bnQ6IDEgfSB9LFxuICAgICAgeyBvdXRwdXRzOiB7IHNpemU6IDQ0LCBjb3VudDogMiB9IH0sXG4gICAgICB7IG91dHB1dHM6IHsgc2l6ZTogMCwgY291bnQ6IDAgfSB9LFxuICAgIF07XG5cbiAgICBjb21wb25lbnRzLmZvckVhY2goKGNvbXBvbmVudCkgPT4gc2hvdWxkLmRvZXNOb3RUaHJvdygoKSA9PiBEaW1lbnNpb25zLnN1bShjb21wb25lbnQpKSk7XG5cbiAgICBjb25zdCBzdW0gPSBjb21wb25lbnRzLnJlZHVjZSgoYSwgYikgPT4gYS5wbHVzKGIpLCBEaW1lbnNpb25zLnplcm8oKSk7XG5cbiAgICBzdW0uc2hvdWxkLmVxbChEaW1lbnNpb25zLnN1bSguLi5jb21wb25lbnRzKSk7XG5cbiAgICBzdW0uc2hvdWxkLmVxbChcbiAgICAgIG5ldyBEaW1lbnNpb25zKHtcbiAgICAgICAgblAyc2hJbnB1dHM6IDEsXG4gICAgICAgIG5QMnNoUDJ3c2hJbnB1dHM6IDIsXG4gICAgICAgIG5QMndzaElucHV0czogMyxcbiAgICAgICAgblAydHJLZXlwYXRoSW5wdXRzOiA0LFxuICAgICAgICBuUDJ0clNjcmlwdFBhdGhMZXZlbDFJbnB1dHM6IDUsXG4gICAgICAgIG5QMnRyU2NyaXB0UGF0aExldmVsMklucHV0czogNixcbiAgICAgICAgblAyc2hQMnBrSW5wdXRzOiAwLFxuICAgICAgICBvdXRwdXRzOiB7IHNpemU6IDY3LCBjb3VudDogMyB9LFxuICAgICAgfSlcbiAgICApO1xuXG4gICAgc3VtLm5PdXRwdXRzLnNob3VsZC5lcWwoc3VtLm91dHB1dHMuY291bnQpO1xuICB9KTtcblxuICBpdCgncHJvdmlkZXMgc29tZSB0eXBpY2FsIG91dHB1dCBzaXplcycsIGZ1bmN0aW9uICgpIHtcbiAgICAoXG4gICAgICBbXG4gICAgICAgIFtEaW1lbnNpb25zLlNpbmdsZU91dHB1dC5wMnNoLCBWaXJ0dWFsU2l6ZXMudHhQMnNoT3V0cHV0U2l6ZV0sXG4gICAgICAgIFtEaW1lbnNpb25zLlNpbmdsZU91dHB1dC5wMnNoUDJ3c2gsIFZpcnR1YWxTaXplcy50eFAyc2hQMndzaE91dHB1dFNpemVdLFxuICAgICAgICBbRGltZW5zaW9ucy5TaW5nbGVPdXRwdXQucDJ3c2gsIFZpcnR1YWxTaXplcy50eFAyd3NoT3V0cHV0U2l6ZV0sXG4gICAgICAgIFtEaW1lbnNpb25zLlNpbmdsZU91dHB1dC5wMnBraCwgVmlydHVhbFNpemVzLnR4UDJwa2hPdXRwdXRTaXplXSxcbiAgICAgICAgW0RpbWVuc2lvbnMuU2luZ2xlT3V0cHV0LnAyd3BraCwgVmlydHVhbFNpemVzLnR4UDJ3cGtoT3V0cHV0U2l6ZV0sXG4gICAgICAgIFtEaW1lbnNpb25zLlNpbmdsZU91dHB1dC5wMnRyLCBWaXJ0dWFsU2l6ZXMudHhQMnRyT3V0cHV0U2l6ZV0sXG4gICAgICBdIGFzIFtEaW1lbnNpb25zLCBudW1iZXJdW11cbiAgICApLmZvckVhY2goKFtkaW1zLCBzaXplXSkgPT4ge1xuICAgICAgZGltcy5nZXRPdXRwdXRzVlNpemUoKS5zaG91bGQuZXFsKHNpemUpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgncHJldmVudHMgc3VtIG9mIGludmFsaWQgZGF0YScsIGZ1bmN0aW9uICgpIHtcbiAgICBzaG91bGQuZG9lc05vdFRocm93KCgpID0+IERpbWVuc2lvbnMuc3VtKHsgb3V0cHV0czogeyBjb3VudDogMCwgc2l6ZTogMCB9IH0pKTtcbiAgICBzaG91bGQuZG9lc05vdFRocm93KCgpID0+IERpbWVuc2lvbnMuc3VtKHsgb3V0cHV0czogeyBjb3VudDogMSwgc2l6ZTogMSB9IH0pKTtcbiAgICBzaG91bGQudGhyb3dzKCgpID0+IERpbWVuc2lvbnMuc3VtKHsgbk91dHB1dHM6IDEgfSkpO1xuICAgIHNob3VsZC50aHJvd3MoKCkgPT4gRGltZW5zaW9ucy5zdW0oeyBuT3V0cHV0czogMSwgb3V0cHV0czogeyBjb3VudDogMiwgc2l6ZTogMSB9IH0pKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgc2hvdWxkLnRocm93cygoKSA9PiBEaW1lbnNpb25zLnN1bSh7IG5QMnNoSW5wdXRzOiAxIH0sIHsgblAyc2hJbnB1dHM6ICdmb28nIH0pKTtcbiAgICBzaG91bGQudGhyb3dzKCgpID0+IERpbWVuc2lvbnMuc3VtKHsgb3V0cHV0czogeyBjb3VudDogMSwgc2l6ZTogMCB9IH0pKTtcbiAgICBzaG91bGQudGhyb3dzKCgpID0+IERpbWVuc2lvbnMuc3VtKHsgb3V0cHV0czogeyBjb3VudDogMCwgc2l6ZTogMSB9IH0pKTtcbiAgICBzaG91bGQudGhyb3dzKCgpID0+IERpbWVuc2lvbnMuc3VtKHsgb3V0cHV0czogeyBjb3VudDogMSwgc2l6ZTogMSB9IH0sIHsgb3V0cHV0czogeyBjb3VudDogMSwgc2l6ZTogMCB9IH0pKTtcbiAgfSk7XG5cbiAgaXQoJ2NvdW50cyBpbnB1dHMgY29ycmVjdGx5JywgZnVuY3Rpb24gKCkge1xuICAgIE9iamVjdC5lbnRyaWVzKERpbWVuc2lvbnMuU2luZ2xlSW5wdXQpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgdmFsdWUubklucHV0cy5zaG91bGQuZXFsKDEsIGtleSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdtdWx0aXBsaWVzIGNvcnJlY3RseScsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkID0gbmV3IERpbWVuc2lvbnMoe1xuICAgICAgblAyc2hJbnB1dHM6IDEsXG4gICAgICBuUDJzaFAyd3NoSW5wdXRzOiAyLFxuICAgICAgblAyd3NoSW5wdXRzOiAzLFxuICAgICAgblAydHJLZXlwYXRoSW5wdXRzOiA0LFxuICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwxSW5wdXRzOiA1LFxuICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiA2LFxuICAgICAgblAyc2hQMnBrSW5wdXRzOiA3LFxuICAgICAgb3V0cHV0czogeyBjb3VudDogMSwgc2l6ZTogMjIgfSxcbiAgICB9KS50aW1lcygzKTtcblxuICAgIGQuc2hvdWxkLmVxbChcbiAgICAgIG5ldyBEaW1lbnNpb25zKHtcbiAgICAgICAgblAyc2hJbnB1dHM6IDMsXG4gICAgICAgIG5QMnNoUDJ3c2hJbnB1dHM6IDYsXG4gICAgICAgIG5QMndzaElucHV0czogOSxcbiAgICAgICAgblAydHJLZXlwYXRoSW5wdXRzOiAxMixcbiAgICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwxSW5wdXRzOiAxNSxcbiAgICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiAxOCxcbiAgICAgICAgblAyc2hQMnBrSW5wdXRzOiAyMSxcbiAgICAgICAgb3V0cHV0czogeyBjb3VudDogMywgc2l6ZTogNjYgfSxcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIGQuZ2V0TklucHV0cygpLnNob3VsZC5lcWwoODQpO1xuICAgIGQubklucHV0cy5zaG91bGQuZXFsKDg0KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0RpbWVuc2lvbnMgZnJvbSB1bnNwZW50IHR5cGVzJywgZnVuY3Rpb24gKCkge1xuICBpdCgnZGV0ZXJtaW5lcyB1bnNwZW50IHNpemUgYWNjb3JkaW5nIHRvIGNoYWluJywgZnVuY3Rpb24gKCkge1xuICAgIGNoYWluQ29kZXNQMnNoLmZvckVhY2goKGNoYWluKSA9PiBEaW1lbnNpb25zLmZyb21VbnNwZW50KHsgY2hhaW4gfSkuc2hvdWxkLmVxbChEaW1lbnNpb25zLnN1bSh7IG5QMnNoSW5wdXRzOiAxIH0pKSk7XG5cbiAgICBjaGFpbkNvZGVzUDJzaFAyd3NoLmZvckVhY2goKGNoYWluKSA9PlxuICAgICAgRGltZW5zaW9ucy5mcm9tVW5zcGVudCh7IGNoYWluIH0pLnNob3VsZC5lcWwoRGltZW5zaW9ucy5zdW0oeyBuUDJzaFAyd3NoSW5wdXRzOiAxIH0pKVxuICAgICk7XG5cbiAgICBjaGFpbkNvZGVzUDJ3c2guZm9yRWFjaCgoY2hhaW4pID0+XG4gICAgICBEaW1lbnNpb25zLmZyb21VbnNwZW50KHsgY2hhaW4gfSkuc2hvdWxkLmVxbChEaW1lbnNpb25zLnN1bSh7IG5QMndzaElucHV0czogMSB9KSlcbiAgICApO1xuXG4gICAgY2hhaW5Db2Rlc1AydHIuZm9yRWFjaCgoY2hhaW4pID0+IHtcbiAgICAgIERpbWVuc2lvbnMuZnJvbVVuc3BlbnQoeyBjaGFpbiB9KS5zaG91bGQuZXFsKERpbWVuc2lvbnMuc3VtKHsgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiAxIH0pKTtcbiAgICAgIERpbWVuc2lvbnMuZnJvbVVuc3BlbnQoXG4gICAgICAgIHsgY2hhaW4gfSxcbiAgICAgICAgeyBwMnRyOiB7IHNjcmlwdFBhdGhMZXZlbDogMSB9LCBwMnRyTXVzaWcyOiB7IHNjcmlwdFBhdGhMZXZlbDogdW5kZWZpbmVkIH0gfVxuICAgICAgKS5zaG91bGQuZXFsKERpbWVuc2lvbnMuc3VtKHsgblAydHJTY3JpcHRQYXRoTGV2ZWwxSW5wdXRzOiAxIH0pKTtcbiAgICB9KTtcblxuICAgIGNoYWluQ29kZXNQMnRyTXVzaWcyLmZvckVhY2goKGNoYWluKSA9PiB7XG4gICAgICBEaW1lbnNpb25zLmZyb21VbnNwZW50KHsgY2hhaW4gfSkuc2hvdWxkLmVxbChEaW1lbnNpb25zLnN1bSh7IG5QMnRyU2NyaXB0UGF0aExldmVsMUlucHV0czogMSB9KSk7XG4gICAgICBEaW1lbnNpb25zLmZyb21VbnNwZW50KFxuICAgICAgICB7IGNoYWluIH0sXG4gICAgICAgIHsgcDJ0cjogeyBzY3JpcHRQYXRoTGV2ZWw6IHVuZGVmaW5lZCB9LCBwMnRyTXVzaWcyOiB7IHNjcmlwdFBhdGhMZXZlbDogdW5kZWZpbmVkIH0gfVxuICAgICAgKS5zaG91bGQuZXFsKERpbWVuc2lvbnMuc3VtKHsgblAydHJLZXlwYXRoSW5wdXRzOiAxIH0pKTtcbiAgICB9KTtcblxuICAgIERpbWVuc2lvbnMuZnJvbVVuc3BlbnRzKGNoYWluQ29kZXMubWFwKChjaGFpbikgPT4gKHsgY2hhaW4gfSkpKS5zaG91bGQuZXFsKFxuICAgICAgbmV3IERpbWVuc2lvbnMoe1xuICAgICAgICBuUDJzaFAyd3NoSW5wdXRzOiAyLFxuICAgICAgICBuUDJzaElucHV0czogMixcbiAgICAgICAgblAyd3NoSW5wdXRzOiAyLFxuICAgICAgICBuUDJ0cktleXBhdGhJbnB1dHM6IDAsXG4gICAgICAgIG5QMnRyU2NyaXB0UGF0aExldmVsMUlucHV0czogMixcbiAgICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiAyLFxuICAgICAgICBuUDJzaFAycGtJbnB1dHM6IDAsXG4gICAgICAgIG91dHB1dHM6IHsgY291bnQ6IDAsIHNpemU6IDAgfSxcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIERpbWVuc2lvbnMuZnJvbVVuc3BlbnRzKFxuICAgICAgY2hhaW5Db2Rlcy5tYXAoKGNoYWluKSA9PiAoeyBjaGFpbiB9KSksXG4gICAgICB7IHAydHI6IHsgc2NyaXB0UGF0aExldmVsOiAxIH0sIHAydHJNdXNpZzI6IHsgc2NyaXB0UGF0aExldmVsOiB1bmRlZmluZWQgfSB9XG4gICAgKS5zaG91bGQuZXFsKFxuICAgICAgbmV3IERpbWVuc2lvbnMoe1xuICAgICAgICBuUDJzaFAyd3NoSW5wdXRzOiAyLFxuICAgICAgICBuUDJzaElucHV0czogMixcbiAgICAgICAgblAyd3NoSW5wdXRzOiAyLFxuICAgICAgICBuUDJ0cktleXBhdGhJbnB1dHM6IDIsXG4gICAgICAgIG5QMnRyU2NyaXB0UGF0aExldmVsMUlucHV0czogMixcbiAgICAgICAgblAydHJTY3JpcHRQYXRoTGV2ZWwySW5wdXRzOiAwLFxuICAgICAgICBuUDJzaFAycGtJbnB1dHM6IDAsXG4gICAgICAgIG91dHB1dHM6IHsgY291bnQ6IDAsIHNpemU6IDAgfSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ2NhbGN1bGF0ZXMgb3V0cHV0IGRpbWVuc2lvbnMgZHluYW1pY2FsbHknLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZXhwZWN0ZWRTaXplcyA9IG5ldyBNYXAoW1xuICAgICAgW1Vuc3BlbnRUeXBlU2NyaXB0Mm9mMy5wMnNoLCBWaXJ0dWFsU2l6ZXMudHhQMnNoT3V0cHV0U2l6ZV0sXG4gICAgICBbVW5zcGVudFR5cGVTY3JpcHQyb2YzLnAyc2hQMndzaCwgVmlydHVhbFNpemVzLnR4UDJzaFAyd3NoT3V0cHV0U2l6ZV0sXG4gICAgICBbVW5zcGVudFR5cGVTY3JpcHQyb2YzLnAyd3NoLCBWaXJ0dWFsU2l6ZXMudHhQMndzaE91dHB1dFNpemVdLFxuICAgICAgW1Vuc3BlbnRUeXBlU2NyaXB0Mm9mMy5wMnRyLCBWaXJ0dWFsU2l6ZXMudHhQMnRyT3V0cHV0U2l6ZV0sXG4gICAgICBbVW5zcGVudFR5cGVTY3JpcHQyb2YzLnAydHJNdXNpZzIsIFZpcnR1YWxTaXplcy50eFAydHJPdXRwdXRTaXplXSxcbiAgICAgIFtVbnNwZW50VHlwZVNjcmlwdDJvZjMudGFwcm9vdEtleVBhdGhTcGVuZCwgVmlydHVhbFNpemVzLnR4UDJ0ck91dHB1dFNpemVdLFxuICAgICAgW1Vuc3BlbnRUeXBlUHViS2V5SGFzaC5wMnBraCwgVmlydHVhbFNpemVzLnR4UDJwa2hPdXRwdXRTaXplXSxcbiAgICAgIFtVbnNwZW50VHlwZVB1YktleUhhc2gucDJ3cGtoLCBWaXJ0dWFsU2l6ZXMudHhQMndwa2hPdXRwdXRTaXplXSxcbiAgICBdKTtcblxuICAgIFsuLi5PYmplY3Qua2V5cyhVbnNwZW50VHlwZVNjcmlwdDJvZjMpLCAuLi5PYmplY3Qua2V5cyhVbnNwZW50VHlwZVB1YktleUhhc2gpXS5mb3JFYWNoKCh0eXBlKSA9PlxuICAgICAgZ2V0T3V0cHV0RGltZW5zaW9uc0ZvclVuc3BlbnRUeXBlKHR5cGUpLm91dHB1dHMuc2l6ZS5zaG91bGQuZXFsKGV4cGVjdGVkU2l6ZXMuZ2V0KHR5cGUgYXMgYW55KSlcbiAgICApO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnRGltZW5zaW9ucyBlc3RpbWF0ZXMnLCBmdW5jdGlvbiAoKSB7XG4gIGl0KCdjYWxjdWxhdGVzIHZzaXplcycsIGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBkaW0oblAyc2hJbnB1dHM6IG51bWJlciwgblAyc2hQMndzaElucHV0czogbnVtYmVyLCBuUDJ3c2hJbnB1dHM6IG51bWJlciwgbk91dHB1dHM6IG51bWJlcik6IERpbWVuc2lvbnMge1xuICAgICAgcmV0dXJuIERpbWVuc2lvbnMuc3VtKFxuICAgICAgICB7XG4gICAgICAgICAgblAyc2hJbnB1dHMsXG4gICAgICAgICAgblAyc2hQMndzaElucHV0cyxcbiAgICAgICAgICBuUDJ3c2hJbnB1dHMsXG4gICAgICAgIH0sXG4gICAgICAgIGdldE91dHB1dERpbWVuc2lvbnNGb3JVbnNwZW50VHlwZShVbnNwZW50VHlwZVB1YktleUhhc2gucDJwa2gpLnRpbWVzKG5PdXRwdXRzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaW1QMnRyKFxuICAgICAgblAydHJLZXlwYXRoSW5wdXRzOiBudW1iZXIsXG4gICAgICBuUDJ0clNjcmlwdFBhdGhMZXZlbDFJbnB1dHM6IG51bWJlcixcbiAgICAgIG5QMnRyU2NyaXB0UGF0aExldmVsMklucHV0czogbnVtYmVyLFxuICAgICAgbk91dHB1dHM6IG51bWJlclxuICAgICk6IERpbWVuc2lvbnMge1xuICAgICAgcmV0dXJuIERpbWVuc2lvbnMuc3VtKFxuICAgICAgICB7XG4gICAgICAgICAgblAydHJLZXlwYXRoSW5wdXRzLFxuICAgICAgICAgIG5QMnRyU2NyaXB0UGF0aExldmVsMUlucHV0cyxcbiAgICAgICAgICBuUDJ0clNjcmlwdFBhdGhMZXZlbDJJbnB1dHMsXG4gICAgICAgIH0sXG4gICAgICAgIGdldE91dHB1dERpbWVuc2lvbnNGb3JVbnNwZW50VHlwZShVbnNwZW50VHlwZVB1YktleUhhc2gucDJwa2gpLnRpbWVzKG5PdXRwdXRzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZWN0b3JzOiBbRGltZW5zaW9ucywgdW5rbm93bltdXVtdID0gW1xuICAgICAgW2RpbSgxLCAwLCAwLCAxKSwgW2ZhbHNlLCAxMCwgMjk4LCAzNCwgMzQyXV0sXG4gICAgICBbZGltKDAsIDEsIDAsIDEpLCBbdHJ1ZSwgMTEsIDE0MCwgMzQsIDE4NV1dLFxuICAgICAgW2RpbSgwLCAwLCAxLCAxKSwgW3RydWUsIDExLCAxMDUsIDM0LCAxNTBdXSxcbiAgICAgIFtkaW0oMiwgMCwgMCwgMSksIFtmYWxzZSwgMTAsIDU5NiwgMzQsIDY0MF1dLFxuICAgICAgW2RpbSgwLCAyLCAwLCAxKSwgW3RydWUsIDExLCAyODAsIDM0LCAzMjVdXSxcbiAgICAgIFtkaW0oMCwgMCwgMiwgMSksIFt0cnVlLCAxMSwgMjEwLCAzNCwgMjU1XV0sXG4gICAgICBbZGltKDEsIDEsIDEsIDEpLCBbdHJ1ZSwgMTEsIDU0MywgMzQsIDU4OF1dLFxuICAgICAgW2RpbSgxLCAxLCAxLCAyKSwgW3RydWUsIDExLCA1NDMsIDY4LCA2MjJdXSxcblxuICAgICAgW2RpbVAydHIoMSwgMCwgMCwgMSksIFt0cnVlLCAxMSwgNTgsIDM0LCAxMDNdXSxcbiAgICAgIFtkaW1QMnRyKDAsIDEsIDAsIDEpLCBbdHJ1ZSwgMTEsIDEwOCwgMzQsIDE1M11dLFxuICAgICAgW2RpbVAydHIoMCwgMCwgMSwgMSksIFt0cnVlLCAxMSwgMTE2LCAzNCwgMTYxXV0sXG4gICAgXTtcblxuICAgIHZlY3RvcnMuZm9yRWFjaCgoW2RpbWVuc2lvbnMsIHByb3BzXSkgPT4ge1xuICAgICAgW1xuICAgICAgICBkaW1lbnNpb25zLmlzU2Vnd2l0KCksXG4gICAgICAgIGRpbWVuc2lvbnMuZ2V0T3ZlcmhlYWRWU2l6ZSgpLFxuICAgICAgICBkaW1lbnNpb25zLmdldElucHV0c1ZTaXplKCksXG4gICAgICAgIGRpbWVuc2lvbnMuZ2V0T3V0cHV0c1ZTaXplKCksXG4gICAgICAgIGRpbWVuc2lvbnMuZ2V0VlNpemUoKSxcbiAgICAgIF0uc2hvdWxkLmVxbChwcm9wcyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=