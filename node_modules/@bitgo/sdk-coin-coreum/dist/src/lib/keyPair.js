"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.KeyPair = void 0;
const sdk_core_1 = require("@bitgo/sdk-core");
const amino_1 = require("@cosmjs/amino");
const abstract_cosmos_1 = require("@bitgo/abstract-cosmos");
const constants_1 = require("./constants");
/**
 * Coreum keys and address management.
 */
class KeyPair extends abstract_cosmos_1.CosmosKeyPair {
    constructor(source) {
        super(source);
    }
    /** @inheritdoc */
    getAddress(format = sdk_core_1.AddressFormat.mainnet) {
        const base64String = Buffer.from(this.getKeys().pub.slice(0, 66), 'hex').toString('base64');
        const address_prefix = format === sdk_core_1.AddressFormat.testnet ? constants_1.TESTNET_ADDRESS_PREFIX : constants_1.MAINNET_ADDRESS_PREFIX;
        return (0, amino_1.pubkeyToAddress)({
            type: 'tendermint/PubKeySecp256k1',
            value: base64String,
        }, address_prefix);
    }
}
exports.KeyPair = KeyPair;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5UGFpci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIva2V5UGFpci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBZ0U7QUFDaEUseUNBQWdEO0FBRWhELDREQUF1RDtBQUN2RCwyQ0FBNkU7QUFFN0U7O0dBRUc7QUFDSCxNQUFhLE9BQVEsU0FBUSwrQkFBYTtJQUN4QyxZQUFZLE1BQXVCO1FBQ2pDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQixDQUFDO0lBRUQsa0JBQWtCO0lBQ2xCLFVBQVUsQ0FBQyxTQUF3Qix3QkFBYSxDQUFDLE9BQU87UUFDdEQsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sS0FBSyx3QkFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsa0NBQXNCLENBQUMsQ0FBQyxDQUFDLGtDQUFzQixDQUFDO1FBQzFHLE9BQU8sSUFBQSx1QkFBZSxFQUNwQjtZQUNFLElBQUksRUFBRSw0QkFBNEI7WUFDbEMsS0FBSyxFQUFFLFlBQVk7U0FDcEIsRUFDRCxjQUFjLENBQ2YsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQWpCRCwwQkFpQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLZXlQYWlyT3B0aW9ucywgQWRkcmVzc0Zvcm1hdCB9IGZyb20gJ0BiaXRnby9zZGstY29yZSc7XG5pbXBvcnQgeyBwdWJrZXlUb0FkZHJlc3MgfSBmcm9tICdAY29zbWpzL2FtaW5vJztcblxuaW1wb3J0IHsgQ29zbW9zS2V5UGFpciB9IGZyb20gJ0BiaXRnby9hYnN0cmFjdC1jb3Ntb3MnO1xuaW1wb3J0IHsgTUFJTk5FVF9BRERSRVNTX1BSRUZJWCwgVEVTVE5FVF9BRERSRVNTX1BSRUZJWCB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBDb3JldW0ga2V5cyBhbmQgYWRkcmVzcyBtYW5hZ2VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgS2V5UGFpciBleHRlbmRzIENvc21vc0tleVBhaXIge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2U/OiBLZXlQYWlyT3B0aW9ucykge1xuICAgIHN1cGVyKHNvdXJjZSk7XG4gIH1cblxuICAvKiogQGluaGVyaXRkb2MgKi9cbiAgZ2V0QWRkcmVzcyhmb3JtYXQ6IEFkZHJlc3NGb3JtYXQgPSBBZGRyZXNzRm9ybWF0Lm1haW5uZXQpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJhc2U2NFN0cmluZyA9IEJ1ZmZlci5mcm9tKHRoaXMuZ2V0S2V5cygpLnB1Yi5zbGljZSgwLCA2NiksICdoZXgnKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgY29uc3QgYWRkcmVzc19wcmVmaXggPSBmb3JtYXQgPT09IEFkZHJlc3NGb3JtYXQudGVzdG5ldCA/IFRFU1RORVRfQUREUkVTU19QUkVGSVggOiBNQUlOTkVUX0FERFJFU1NfUFJFRklYO1xuICAgIHJldHVybiBwdWJrZXlUb0FkZHJlc3MoXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICd0ZW5kZXJtaW50L1B1YktleVNlY3AyNTZrMScsXG4gICAgICAgIHZhbHVlOiBiYXNlNjRTdHJpbmcsXG4gICAgICB9LFxuICAgICAgYWRkcmVzc19wcmVmaXhcbiAgICApO1xuICB9XG59XG4iXX0=