"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.KeyPair = void 0;
const sdk_core_1 = require("@bitgo/sdk-core");
const amino_1 = require("@cosmjs/amino");
const abstract_cosmos_1 = require("@bitgo/abstract-cosmos");
const constants_1 = require("./constants");
/**
 * Provenance keys and address management.
 */
class KeyPair extends abstract_cosmos_1.CosmosKeyPair {
    constructor(source) {
        super(source);
    }
    /** @inheritdoc */
    getAddress(format = sdk_core_1.AddressFormat.testnet) {
        const base64String = Buffer.from(this.getKeys().pub.slice(0, 66), 'hex').toString('base64');
        const address_prefix = format === sdk_core_1.AddressFormat.mainnet ? constants_1.MAINNET_ADDRESS_PREFIX : constants_1.TESTNET_ADDRESS_PREFIX;
        return (0, amino_1.pubkeyToAddress)({
            type: abstract_cosmos_1.PubKeyType.secp256k1,
            value: base64String,
        }, address_prefix);
    }
}
exports.KeyPair = KeyPair;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5UGFpci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIva2V5UGFpci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBZ0U7QUFDaEUseUNBQWdEO0FBRWhELDREQUFtRTtBQUNuRSwyQ0FBNkU7QUFFN0U7O0dBRUc7QUFDSCxNQUFhLE9BQVEsU0FBUSwrQkFBYTtJQUN4QyxZQUFZLE1BQXVCO1FBQ2pDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQixDQUFDO0lBRUQsa0JBQWtCO0lBQ2xCLFVBQVUsQ0FBQyxTQUF3Qix3QkFBYSxDQUFDLE9BQU87UUFDdEQsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVGLE1BQU0sY0FBYyxHQUFHLE1BQU0sS0FBSyx3QkFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsa0NBQXNCLENBQUMsQ0FBQyxDQUFDLGtDQUFzQixDQUFDO1FBQzFHLE9BQU8sSUFBQSx1QkFBZSxFQUNwQjtZQUNFLElBQUksRUFBRSw0QkFBVSxDQUFDLFNBQVM7WUFDMUIsS0FBSyxFQUFFLFlBQVk7U0FDcEIsRUFDRCxjQUFjLENBQ2YsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQWpCRCwwQkFpQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZGRyZXNzRm9ybWF0LCBLZXlQYWlyT3B0aW9ucyB9IGZyb20gJ0BiaXRnby9zZGstY29yZSc7XG5pbXBvcnQgeyBwdWJrZXlUb0FkZHJlc3MgfSBmcm9tICdAY29zbWpzL2FtaW5vJztcblxuaW1wb3J0IHsgQ29zbW9zS2V5UGFpciwgUHViS2V5VHlwZSB9IGZyb20gJ0BiaXRnby9hYnN0cmFjdC1jb3Ntb3MnO1xuaW1wb3J0IHsgTUFJTk5FVF9BRERSRVNTX1BSRUZJWCwgVEVTVE5FVF9BRERSRVNTX1BSRUZJWCB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLyoqXG4gKiBQcm92ZW5hbmNlIGtleXMgYW5kIGFkZHJlc3MgbWFuYWdlbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIEtleVBhaXIgZXh0ZW5kcyBDb3Ntb3NLZXlQYWlyIHtcbiAgY29uc3RydWN0b3Ioc291cmNlPzogS2V5UGFpck9wdGlvbnMpIHtcbiAgICBzdXBlcihzb3VyY2UpO1xuICB9XG5cbiAgLyoqIEBpbmhlcml0ZG9jICovXG4gIGdldEFkZHJlc3MoZm9ybWF0OiBBZGRyZXNzRm9ybWF0ID0gQWRkcmVzc0Zvcm1hdC50ZXN0bmV0KTogc3RyaW5nIHtcbiAgICBjb25zdCBiYXNlNjRTdHJpbmcgPSBCdWZmZXIuZnJvbSh0aGlzLmdldEtleXMoKS5wdWIuc2xpY2UoMCwgNjYpLCAnaGV4JykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIGNvbnN0IGFkZHJlc3NfcHJlZml4ID0gZm9ybWF0ID09PSBBZGRyZXNzRm9ybWF0Lm1haW5uZXQgPyBNQUlOTkVUX0FERFJFU1NfUFJFRklYIDogVEVTVE5FVF9BRERSRVNTX1BSRUZJWDtcbiAgICByZXR1cm4gcHVia2V5VG9BZGRyZXNzKFxuICAgICAge1xuICAgICAgICB0eXBlOiBQdWJLZXlUeXBlLnNlY3AyNTZrMSxcbiAgICAgICAgdmFsdWU6IGJhc2U2NFN0cmluZyxcbiAgICAgIH0sXG4gICAgICBhZGRyZXNzX3ByZWZpeFxuICAgICk7XG4gIH1cbn1cbiJdfQ==